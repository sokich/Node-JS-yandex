const fs = require('fs');

module.exports.writeFile =  function (path, cards, next, callback){
	fs.writeFile(path, JSON.stringify(cards), (err) =>{
		if (err){
			return next("File writing error: " + err);
			res.statusCode = 500;
			res.end("File writing errorrr: " + err);
			return console.error(err);
		}
		callback.call(this, err);
	})

}

module.exports.getFile =function (path, res, next, callback) {
	fs.readFile(path, (err, data) =>{
		if (err) {
			throw err;
			// return next("File read error: "+err);
		} else {
			let parsed;
			try {parsed = JSON.parse(data)}
			catch (err) {
				return next("Parsing error: "+ err)
			};
			callback.call(this, parsed);
		}

	})

}
